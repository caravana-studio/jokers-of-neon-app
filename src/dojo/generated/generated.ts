/* Autogenerated file. Do not edit manually. */

import { DojoProvider } from "@dojoengine/core";
import { Account, AccountInterface } from "starknet";
import { Card } from "../../types/card";

export type IWorld = Awaited<ReturnType<typeof setupWorld>>;

export interface CheckHandProps {
  account: Account | AccountInterface;
  gameId: number;
  cards: Card[];
}

export async function setupWorld(provider: DojoProvider) {
  function actions() {
    const contract_name = "game_system";

    const createGame = async ({ account }: { account: AccountInterface }) => {
      try {
        return await provider.execute(
          account,
          contract_name,
          "create_game",
          []
        );
      } catch (error) {
        console.error("Error executing createGame:", error);
        throw error;
      }
    };

    const checkHand = async ({
      account,
      gameId,
      cards,
    }: {
      account: AccountInterface;
      gameId: number;
      cards: Card[];
    }) => {
      try {
        console.log('cards', cards)
        const cardArray = [gameId,cards.length,  ...cards.map(card => card.idx ?? 0)]
        console.log(cardArray);
        return await provider.execute(
          account,
          contract_name,
          "check_hand",
          cardArray
        );
      } catch (error) {
        console.error("Error executing checkHand:", error);
        throw error;
      }
    };
    
    const discard = async ({
      account,
      gameId,
      cards,
    }: {
      account: AccountInterface;
      gameId: number;
      cards: Card[];
    }) => {
      try {
        console.log('cards', cards)
        const cardArray = [gameId,cards.length,  ...cards.map(card => card.idx ?? 0)]
        console.log(cardArray);
        return await provider.execute(
          account,
          contract_name,
          "discard",
          cardArray
        );
      } catch (error) {
        console.error("Error executing discard:", error);
        throw error;
      }
    };

    return { checkHand, createGame, discard };
  }
  return {
    actions: actions(),
  };
}
