/* Autogenerated file. Do not edit manually. */

import { DojoProvider } from "@dojoengine/core";
import { AccountInterface, shortString } from "starknet";

export type IWorld = Awaited<ReturnType<typeof setupWorld>>;

interface CheckHandProps {
  account: AccountInterface;
  gameId: number;
  cards: number[];
}

interface CreateGameProps {
  account: AccountInterface;
  username: string;
}
const game_contract = "game_system";
const shop_contract = "shop_system";

export async function setupWorld(provider: DojoProvider) {
  function actions() {
    const createGame = async ({ account, username }: CreateGameProps) => {
      try {
        return await provider.execute(account, game_contract, "create_game", [
          shortString.encodeShortString(username),
        ]);
      } catch (error) {
        console.error("Error executing createGame:", error);
        throw error;
      }
    };

    const checkHand = async ({ account, gameId, cards }: CheckHandProps) => {
      try {
        const cardArray = [gameId, cards.length, ...cards];
        console.log(cardArray);
        return await provider.execute(
          account,
          game_contract,
          "check_hand",
          cardArray
        );
      } catch (error) {
        console.error("Error executing checkHand:", error);
        throw error;
      }
    };

    const discard = async ({
      account,
      gameId,
      cards,
    }: {
      account: AccountInterface;
      gameId: number;
      cards: number[];
    }) => {
      try {
        const cardArray = [gameId, cards.length, ...cards];
        console.log(cardArray);
        return await provider.execute(
          account,
          game_contract,
          "discard",
          cardArray
        );
      } catch (error) {
        console.error("Error executing discard:", error);
        throw error;
      }
    };

    const discardEffectCard = async ({
      account,
      gameId,
      card,
    }: {
      account: AccountInterface;
      gameId: number;
      card: number;
    }) => {
      try {
        const cardArray = [gameId, card];
        return await provider.execute(
          account,
          game_contract,
          "discard_effect_card",
          cardArray
        );
      } catch (error) {
        console.error("Error executing discardEffectCard:", error);
        throw error;
      }
    };

    const skipShop = async ({
      account,
      gameId,
    }: {
      account: AccountInterface;
      gameId: number;
    }) => {
      try {
        return await provider.execute(account, shop_contract, "skip_shop", [
          gameId,
        ]);
      } catch (error) {
        console.error("Error executing skip_shop:", error);
        throw error;
      }
    };

    const buyCard = async ({
      account,
      gameId,
      card_idx,
      card_type,
    }: {
      account: AccountInterface;
      gameId: number;
      card_idx: number;
      card_type: number;
    }) => {
      try {
        return await provider.execute(account, shop_contract, "buy_card_item", [
          gameId,
          card_idx,
          card_type,
        ]);
      } catch (error) {
        console.error("Error executing buy_card_item:", error);
        throw error;
      }
    };

    const levelUpPokerHand = async ({
      account,
      gameId,
      item_id,
    }: {
      account: AccountInterface;
      gameId: number;
      item_id: number;
    }) => {
      try {
        return await provider.execute(
          account,
          shop_contract,
          "buy_poker_hand_item",
          [gameId, item_id]
        );
      } catch (error) {
        console.error("Error executing buy_poker_hand_item:", error);
        throw error;
      }
    };

    const play = async ({
      account,
      gameId,
      cards,
    }: {
      account: AccountInterface;
      gameId: number;
      cards: number[];
    }) => {
      try {
        const cardArray = [gameId, cards.length, ...cards];
        console.log(cardArray);
        return await provider.execute(
          account,
          game_contract,
          "play",
          cardArray
        );
      } catch (error) {
        console.error("Error executing discard:", error);
        throw error;
      }
    };

    return {
      checkHand,
      createGame,
      discard,
      discardEffectCard,
      play,
      skipShop,
      buyCard,
      levelUpPokerHand,
    };
  }
  return {
    actions: actions(),
  };
}
